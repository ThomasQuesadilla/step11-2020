<!-- Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. -->

{% extends "base.html" %}

{% block title %}Mentor Matching{% endblock %}

{% block styles %}
  {{ super() }}
  {% set styles = [
      "static/styles/questionnaire.css"
    ] %}
  {% for style in styles %}
    <link rel="stylesheet" type="text/css" href={{ style }}>
  {% endfor %}
{% endblock %}

{% block main_content %}
<h1> Form </h1>
<div class = "form-container">
  <form id="information-form" action="/questionnaire" method="{%raw%}{%if currentUser %}PUT{% else %}POST{% endif %}{%endraw%}">
    <h3> Step 1: Basic Personal Information </h3>
    <input type="hidden" name="formType" id="formType" value={{"{{"}}formType{{"}}"}} />
    <label for="name">Your Name</label>
    <input type="text" id="name" name="name" placeholder="Your name.." {% raw %}{% if currentUser and currentUser.name %} value="{{currentUser.name}}"
    {% endif %}{% endraw %}>

    <label for="dateOfBirth">Date of Birth:</label>
    <input type="date" name="dateOfBirth" {% raw %}{% if currentUser and currentUser.description != '' %} value={{currentUser.dateOfBirth}}
    {% endif %}{% endraw %}>

    <label for="country">Country</label>
    <select id="country" name="country" required>
      {% raw %} {% if currentUser and currentUser.country %}
      <option value="{{ currentUser.country }}" selected hidden> {{currentUser.country.longName}} </option>
      {% else %}
      <option value="" selected hidden> select an option </option>
      {% endif %} {% endraw %}
      {% for country in countries %}
      <option value="{{country}}">{{country.longName}}</option>
      {% endfor %}
    </select>

    <label for="timezone">Your Location's Timezone</label>
    <select id="timezone" name="timezone" required >
      {% raw %}{% if currentUser and currentUser.timezone %}
      <option value="{{ currentUser.timezone.timezoneID }}" selected hidden> {{currentUser.timezone.name}} {{timezone.offset}} </option>
      {% else %}
      <option value="" selected disabled hidden> select an option </option>
      {% endif %}{% endraw %}
      {% for timezone in timezones %}
      <option value="{{timezone.timezoneID}}"> {{timezone.name}}: {{timezone.offset}} </option>
      {% endfor %}
    </select>

    <label for="language">Preferred Language</label>
    <select id="language" name="language">
      {% raw %}{% if currentUser and currentUser.language %}
      <option value="{{ currentUser.language }}" selected hidden> {{currentUser.language.longName}}</option>
      {% else %}
      <option value="" selected disabled hidden> select an option </option>
      {% endif %}{% endraw %}
      {% for language in languages %}
      <option value="{{language}}"> {{language.longName}}</option>
      {% endfor %}
    </select>


    <h3> Step 2: More Personal Information </h3>
    <p> This information is used to find a person that best fits you.
       Feel free to fill in with whatever you're comfortable sharing: everything in this step is optional </p>
    <div id="ethnicity-div">
      <p> Check off whatever best applies to you </p>
      {% raw %}{% for ethnicity in ethnicities %}
      <input type="checkbox" class="ethnicityCheckbox" id="ethnicity-{{ethnicity}}" name="{{ethnicity}}"
      value="{{ethnicity}}"{% if currentUser and ethnicity in currentUser.ethnicityList %} checked{% endif %}
      {%if ethnicity == 'OTHER'%} onclick="checklistCheckForOther('ethnicity')" {% endif %}>
      <label for="{{ethnicity}}"> {{ethnicity.title}} </label><br>
      {% endfor %}{% endraw %}
      <!-- Used to store ethnicity values  -->
    <input type="hidden" name="ethnicity" id="ethnicity" value="" />
    </div> <br>
    <div id="other-input-ethnicity"></div><br>

    <label for="gender">Gender</label>
    <select id="gender" name="gender" onchange="checkForOther(this.value, 'gender')">
      {% raw %}{% if currentUser and currentUser.gender %}
      <option value="{{ currentUser.gender }}" selected hidden> {{currentUser.gender.title}}</option>
      {% else %}
      <option value="" selected disabled hidden> select an option </option>
      {% endif %}{% endraw %}
      {% for gender in genders %}
      <option value="{{gender}}"> {{gender.title}}</option>
      {% endfor %}
    </select>
    <div id="other-input-gender"></div><br>

    <label for="educationLevel">Current/Highest Level of Education</label>
    <select id="educationLevel" name="educationLevel"  onchange="checkForOther(this.value, 'educationLevel')">
      {% raw %}{% if currentUser and currentUser.educationLevel %}
      <option value="{{ currentUser.educationLevel }}" selected hidden> {{currentUser.educationLevel.title}}</option>
      {% else %}
      <option value="" selected disabled hidden> select an option </option>
      {% endif %}{% endraw %}
      {% for educationLevel in educationLevels %}
      <option value="{{educationLevel}}"> {{educationLevel.title}}</option>
      {% endfor %}
    </select>
    <div id="other-input-educationLevel"></div><br>

    <div id="firstGen">
      <label> Do/did you consider yourself a first generation student</label>
      <input type="radio" name="firstGen" value="true" {% raw %}{% if currentUser and currentUser.firstGen %} checked
      {% endif %}{% endraw %}> Yes </input>
      <input type="radio" name="firstGen" value="false" {% raw %}{% if currentUser and not currentUser.firstGen %} checked
      {% endif %}{% endraw %}> No </input>
    </div>
    <div id="lowIncome">
      <label> Do/did you consider yourself a low income student</label>
      <input type="radio" name="lowIncome" value="true" {% raw %}{% if currentUser and currentUser.lowIncome %} checked
      {% endif %}{% endraw %}> Yes </input>
      <input type="radio" name="lowIncome" value="false" {% raw %}{% if currentUser and not currentUser.lowIncome %} checked
      {% endif %}{% endraw %}> No </input>
    </div>


    <h3> Step 3: Goals and Logistics </h3>
    <!-- Displayed to those who selected "Become a Mentor" -->
    {% raw %}{% if formType == "mentor" %} {% endraw %}
    <label for="mentorType"> What type of Mentor would you like to be? </label>
    <select id="mentorType" name="mentorType" required>
      {% raw %} {% if currentUser and currentUser.mentorType %}
      <option value="{{ currentUser.mentorType }}" selected hidden> {{currentUser.mentorType.title}} </option>
      {% else %}
      <option value="" selected hidden> select an option </option>
      {% endif %} {% endraw %}
      {% for mentorType in mentorTypes %}
      <option value="{{mentorType}}"> {{mentorType.title}}</option>
      {% endfor %}
    </select> <br>

    <div id="focusList-div">
      <p> What areas would you like to focus on (Choose all that apply). </p>
      {% raw %}{% for topic in topics %}
      <input type="checkbox" class="focusListCheckbox" name="{{topic}}" value="{{topic}}" {% if currentUser and topic in currentUser.focusList %} checked
      {% endif %}>
      <label for="{{topic}}"> {{topic.title}} </label><br>
      {% endfor %} {% endraw %}
    <input type="hidden" name="focusList" id="focusList" value="" />
  </div> <br>

    <!-- Displayed to those who selected "Find a Mentor" -->
    {% raw %} {% else %} {% endraw %}
    <label for="mentorType"> What type of Mentor are you looking for? </label>
    <select id="mentorType" name="mentorType" required>
      {% raw %} {% if currentUser and currentUser.desiredMentorType %}
      <option value="{{ currentUser.desiredMentorType }}" selected hidden> {{currentUser.desiredMentorType.title}} </option>
      {% else %}
      <option value="" selected hidden> select an option </option>
      {% endif %} {% endraw %}
      {% for mentorType in mentorTypes %}
      <option value="{{mentorType}}"> {{mentorType.title}}</option>
      {% endfor %}
    </select> <br>

    <label for="desiredMeetingFrequency">How often would you like to meet?</label>
    <select id="desiredMeetingFrequency" name="desiredMeetingFrequency" required>
      {% raw %} {% if currentUser  and currentUser.desiredMeetingFrequency %}
      <option value="{{ currentUser.desiredMeetingFrequency }}" selected hidden> {{currentUser.desiredMeetingFrequency.title}} </option>
      {% else %}
      <option value="" selected hidden> select an option </option>
      {% endif %} {% endraw %}
      {% for meetingFrequency in meetingFrequencies %}
      <option value="{{meetingFrequency}}"> {{meetingFrequency.title}}</option>
      {% endfor %}
    </select> <br>

    <label for="goal">What subject would you like to focus on (if applicable)? </label>
    <select id="goal" name="goal" required>
      {% raw %} {% if currentUser and currentUser.goal %}
      <option value="{{ currentUser.goal }}" selected hidden> {{currentUser.goal.title}} </option>
      {% else %}
      <option value="" selected hidden> select an option </option>
      {% endif %}
      {% for topic in topics %}
      <option value="{{topic}}"> {{topic.title}}</option>
      {% endfor %}{% endraw %}
    </select>
    {% raw %} {% endif %} {% endraw %}


    <h3> Step 4: Extra </h3>

    <label for="image-upload"> (Optional) Upload an image of yourself </label>
    <input type="file" id="image-upload" name="image-upload">

    <label for="description"> (Optional) Write a short bio about yourself</label>
    <input type="text" name="description" placeholder="For example, what are your hobbies... " {% raw %}{% if currentUser and currentUser.description %} value={{currentUser.description}}
    {% endif %}{% endraw %}>
    <input type="submit" value="Submit">
  </form>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  {% set scripts = [
      "static/scripts/questionnaire.js"
    ]%}
  {% for script in scripts %}
    <script charset="utf-8" type="text/javascript" src={{ script }}></script>
  {% endfor %}
{% endblock %}
