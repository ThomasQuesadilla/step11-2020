{#  Copyright 2020 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.  #}

{% extends "base.html" %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" type="text/css" href="static/styles/profile.css">
{% endblock %}
{% block page_title %}Profile{% endblock %}

{% block main_content %}{% raw %}
<div id="profile-container" class="mx-auto w-90 shadow mb-3">
  <header class="w-100 bg-light-gray">
  </header>
  <main>
    <div class="container divider-top pt-5 px-3 pb-3 d-flex flex-row flex-wrap align-items-center justify-content-start justify-content-md-center">
      <div class="container d-flex flex-column align-items-end justify-content-end pr-md-3 mw-md-50">
        <img class="img-thumbnail rounded-circle" id="profile-image" src="/static/images/thomas.jpg">
      </div>
      <div class="container d-flex flex-column align-items-start justify-content-start px-0 pl-md-3 mw-md-50" id="profile-title">
        {% if profileUser.userID == currentUser.userID %}
        <button class="btn btn-outline-secondary bg-white mb-4" id="edit" onclick="location.href='/questionnaire?formType={{currentUser.userType.title}}';">Edit My Profile</button>
        {% endif %}
        <h1 class="mb-0">{{profileUser.name}}</h1>
        <h4 class="mb-0">{{profileUser.userType.title}}</h4>
      </div>
      <!-- <div class="container d-flex flex-column align-items-start justify-content-start pb-3 pr-md-3 mw-md-50" id="profile-title">
      </div> -->
    </div>
    <div class="container px-0 py-4 d-flex flex-row flex-wrap align-items-start justify-content-start justify-content-md-center">
      <div class="d-flex flex-column col-md-4 align-items-start justify-content-start pr-md-3 mw-md-50" id="profile-title">
        <p class="mb-1 user-country">Country: {{ profileUser.country.longName }}</p>
        <p class="mb-1 user-language">Language: {{ profileUser.language.longName }}</p>
        <p class="mb-1 user-timezone">Timezone: {{ profileUser.timezone.name }}: GMT {{ ("+" if profileUser.timezone.offset >= 0 else "") + profileUser.timezone.offset }}</p>
        {% set ethnicities = [] %}
        {% for ethnicity in profileUser.ethnicityList %}{% if ethnicity.title == "Other" %}{% if ethnicities.append(profileUser.ethnicityOther) %}{% endif %}{% else %}{% if ethnicity|string != "UNSPECIFIED" %}{% if ethnicities.append(ethnicity.title) %}{% endif %}{% endif %}{% endif %}{% endfor %}
        <p class="mb-1 user-ethnicity">Ethnicity: {{ ethnicities|join(', ') }}</p>
        <p class="mb-1 user-gender">Gender: {% if profileUser.gender.title != "Other" %}{{ profileUser.gender.title }}
            {% else %}{{ profileUser.genderOther }}{% endif %}</p>
        <p class="mb-1 user-first-gen">First-gen: {% if profileUser.firstGen %}Yes{% else %}No{% endif %}</p>
        <p class="mb-1 user-low-income">Low income: {% if profileUser.lowIncome %}Yes{% else %}No{% endif %}</p>
        <p class="mb-1 user-education-level">Education: {% if profileUser.educationLevel.title != "Other" %}{{ profileUser.educationLevel.title }}
            {% else %}{{ profileUser.educationLevelOther }}{% endif %}</p>
      </div>
      <div class="d-flex flex-column col-md-4 align-items-start justify-content-start mw-md-50">
        {% if profileUser.userID == currentUser.userID %}
          <p class="mb-1 user-email">Email: {{ profileUser.email }}</p>
        {% endif %}
        {% if profileUser.userType.title == "Mentor" %}
          <h6 class="mb-1">{% if !profileUser.visibility %}Not {% endif %}Available for mentorship</h6>
        {% endif %}
        {% if profileUser.userType.title == "Mentor" %}
          <p class="mb-2 user-mentor-type">{{ profileUser.mentorType.title }}</p>
          {% set focuses = [] %}
          {% for focus in profileUser.focusList %}{% if focuses.append(focus.title) %}{% endif %}{% endfor %}
          <p class="mb-2 user-focus">Focus{% if focuses|length == 0 %}es: None{% else %}{% if focuses|length == 1 %}: {% else %}es: {% endif %}{% endif %}{{ focuses|join(', ') }}</p>
        {% else %}
          <p class="mb-2 user-mentee-goal">Mentorship Goal: {{ profileUser.goal.title }}</p>
          <p class="mb-2 user-mentee-desired-meeting-frequency">Meeting times: {{ profileUser.desiredMeetingFrequency.title }}</p>
          <p class="mb-2 user-mentee-desired-mentor-type">Preferred mentor: {{ profileUser.desiredMentorType.title }}</p>
        {% endif %}
          <p class="mb-1 user-age">Age: {{ profileUser.age }}</p>
      </div>
    </div>
    <div class="container d-flex flex-row flex-wrap align-items-center px-0 justify-content-start justify-content-md-center">
      <div class="container d-flex flex-column column-md-8">
        <p class="m-0">Bio:</p>
        <p class="m-0 user-description text-break">{{profileUser.description}}</p>
      </div>
    </div>
    <div class="container d-flex justify-content-end">
      <button class="btn btn-outline-danger bg-white " id="delete" onclick="confirmDelete()">Delete Profile</button>
    </div>
  </main>
  <div class="container d-flex flex-row align-items-center justify-content-center p-3 personal-profile-buttons" id="profile-footer">

  </div>
</div>
{% endraw %}{% endblock %}
{% block scripts %}
{{ super() }}
<script charset="utf-8" type="text/javascript" src="static/scripts/profile.js"></script>
{% endblock %}
